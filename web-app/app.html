<!DOCTYPE html>
<meta name="viewport" content="width=device-width, initial-scale=1">
<html>
    <head>
        <script src="setup.js"></script>
        <link rel="stylesheet" href="app.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Radio+Canada:wght@300;400&display=swap" rel="stylesheet">
    </head>
    <body>
        <div id="content">
            <div id="home">
                <h1 id="app_name">Party Queue</h1>
                <button id="create_room_button" type="button" onclick="createRoom()">Create room</button>

                <button id="join_room_button" type="button" onclick="joinRoom()">Join room</button>
            </div>
            <div id="room">
                <h1 id="room_code"></h1>
                <h2 id="song_name"></h2>
                <h4 id="song_artists"></h2>
                <div id="buttons">
                    <div id="add_queue">
                        <input type="text" placeholder="Song name" id="songNameInput" >
                        <button class="btn" type="button" onclick="addMusicToQueue()">Add to queue</button>
                    </div>
                    <button class="btn" type="button" onclick="voteToSkipSong()">Vote to skip</button>
                    <div id="logged">
                        <button class="btn" type="button" onclick="closeRoom()">Close Room</button>
                    </div>
                    <div id="notLogged">
                        <button class="btn"type="button" onclick="exitRoom()">Exit Room</button>
                    </div>
                </div>
                <script>
                    document.getElementById("room_code").innerHTML = "Room code = " + localStorage.getItem('room_code')
                </script>
            </div>
        </div>
        <script>
            if(localStorage.getItem('room_code') !== null) {
                let notLogged = document.getElementById("room") 
                notLogged.style.display = "block"
                if(localStorage.getItem('user_id') !== null) {
                    let logged = document.getElementById("logged");
                    logged.style.display = "block"
                } else {
                    let notLogged = document.getElementById("notLogged");
                    notLogged.style.display = "block"
                }
            } else {
                let notLogged = document.getElementById("home") 
                notLogged.style.display = "grid"
            }
        </script>
    </body>
</html>
